<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elixir Calculator</title>
    <!-- Icon -->
    <link rel="icon" type="image/webp" href="https://tr.rbxcdn.com/180DAY-e3b172c999c4bbc6ef671fcad60e51d0/256/256/Image/Webp/noFilter">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            min-height: 100vh;
        }
        .card {
            background: linear-gradient(145deg, #1e293b 0%, #0f172a 100%);
            border-radius: 1rem;
            border: 1px solid #334155;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        @media (min-width: 768px) {
            .card {
                padding: 2rem;
                margin-bottom: 1.5rem;
            }
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }
        .input-group {
            margin-bottom: 0;
            display: flex;
            flex-direction: column;
        }
        .input-group:last-child {
            margin-bottom: 0;
        }
        .input-group label {
            display: block;
            color: #cbd5e1;
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .input-field {
            width: 100%;
            padding: 0.625rem 0.875rem;
            border: 2px solid #334155;
            border-radius: 0.5rem;
            background-color: #0f172a;
            color: #f1f5f9;
            transition: all 0.2s;
            font-size: 0.875rem;
        }
        @media (min-width: 768px) {
            .input-field {
                padding: 0.75rem 1rem;
                font-size: 1rem;
            }
        }
        .input-field:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            background-color: #1e293b;
        }
        /* Elixir Checkbox */
        .elixir-checkbox-label {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: 700;
            padding: 0.6rem 1rem;
            border-radius: 0.5rem;
            border: 2px solid transparent;
            background-color: #1e293b;
            transition: all 0.3s ease;
            min-width: 100px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            font-size: 0.875rem;
        }
        @media (min-width: 640px) {
            .elixir-checkbox-label {
                padding: 0.75rem 1.5rem;
                min-width: 140px;
                font-size: 1rem;
            }
        }
        .elixir-checkbox-label:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        .elixir-checkbox:checked + .elixir-checkbox-label {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3), 0 4px 12px rgba(59, 130, 246, 0.4);
            transform: scale(1.05);
        }
        .header-section {
            text-align: center;
            padding: 1.5rem 1rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 1rem;
            border: 1px solid #334155;
        }
        @media (min-width: 768px) {
            .header-section {
                padding: 3rem 1rem;
                margin-bottom: 2rem;
            }
        }
        .header-section h1 {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }
        @media (min-width: 768px) {
            .header-section h1 {
                font-size: 3rem;
            }
        }
        .header-section p {
            color: #94a3b8;
            font-size: 0.875rem;
        }
        @media (min-width: 768px) {
            .header-section p {
                font-size: 1.125rem;
            }
        }
        .section-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #f1f5f9;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #334155;
        }
        @media (min-width: 768px) {
            .section-title {
                font-size: 1.5rem;
                margin-bottom: 1.5rem;
                padding-bottom: 0.75rem;
            }
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        .stat-card {
            text-align: center;
            padding: 1.5rem;
            background: linear-gradient(145deg, #0f172a 0%, #1e293b 100%);
            border: 1px solid #334155;
            border-radius: 0.75rem;
            transition: all 0.2s;
        }
        .stat-card:hover {
            transform: translateY(-3px);
            border-color: #3b82f6;
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.2);
        }
        .stat-label {
            font-size: 0.875rem;
            color: #94a3b8;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }
        .stat-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: #60a5fa;
            font-family: 'Consolas', 'Monaco', monospace;
        }
        .stat-value.green {
            color: #34d399;
        }
        .social-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        .social-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border: 1px solid #334155;
            border-radius: 0.5rem;
            color: #cbd5e1;
            text-decoration: none;
            transition: all 0.2s;
            font-weight: 600;
        }
        .social-link:hover {
            transform: translateY(-2px);
            border-color: #3b82f6;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
            color: #60a5fa;
        }
        /* Sticky Results */
        .sticky-results {
            position: sticky;
            top: 1rem;
            z-index: 10;
        }
        @media (max-width: 1023px) {
            .sticky-results {
                position: relative;
                top: 0;
            }
        }
        /* Compact input styling */
        .compact-input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .compact-input-group label {
            margin-bottom: 0;
            font-size: 0.75rem;
        }
        /* Grid improvements */
        .elixir-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }
        /* Reference table styling */
        .reference-table {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 0.5rem;
            font-size: 0.75rem;
        }
        .reference-item {
            padding: 0.5rem;
            background: rgba(30, 41, 59, 0.5);
            border-radius: 0.375rem;
            border: 1px solid #334155;
            text-align: center;
        }
    </style>
</head>
<body>

    <!-- Main Content -->
    <main class="container mx-auto p-3 md:p-4 lg:p-8 max-w-7xl">
        <!-- Header -->
        <div class="header-section">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 items-start">
                <!-- Left: Title and Info -->
                <div class="lg:col-span-1">
                    <h1 class="text-2xl md:text-3xl font-bold">Elixir Calculator</h1>
                    <p class="mt-2 text-sm md:text-base text-slate-300">Calculate total points and stats from your elixirs</p>
                    <p class="text-xs md:text-sm text-gray-500 mt-1">Made by @jensenallenco</p>
                    
                    <!-- Social Links -->
                    <div class="flex gap-2 md:gap-3 mt-3 md:mt-4 justify-center">
                        <a href="https://www.roblox.com/games/18645473062/Guild-War-V35-Cultivation-Mortal-to-Immortal" target="_blank" rel="noopener noreferrer" class="social-link text-sm md:text-base">
                            <svg class="w-4 h-4 md:w-5 md:h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M18.403 3.892L3.896 0 0 14.506l14.507 3.896L24 3.893z"/></svg>
                            <span>Play</span>
                        </a>
                        <a href="https://discord.com/invite/gFgcEavupb" target="_blank" rel="noopener noreferrer" class="social-link text-sm md:text-base">
                            <svg class="w-4 h-4 md:w-5 md:h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"/></svg>
                            <span>Discord</span>
                        </a>
                    </div>
                </div>

                <!-- Right: Rarity Point Values Table -->
                <div class="lg:col-span-2 bg-gradient-to-br from-slate-800/60 to-slate-800/30 rounded-xl border border-slate-700/50 p-3 md:p-5 shadow-lg">
                    <h3 class="text-sm md:text-base font-semibold text-slate-200 mb-3 md:mb-4">Rarity Point Values</h3>
                    <!-- First row: 6 items (Common to Scarce) -->
                    <div class="grid grid-cols-3 sm:grid-cols-6 gap-1.5 sm:gap-2.5 mb-1.5 sm:mb-2.5">
                        <div class="flex flex-col items-center p-1.5 sm:p-2.5 bg-slate-900/60 rounded-lg border border-slate-700/40 hover:border-gray-500/50 hover:bg-slate-900/80 transition-all duration-200">
                            <span class="text-[10px] sm:text-xs text-gray-400 font-semibold mb-0.5">Common</span>
                            <span class="text-xs sm:text-sm text-gray-200 font-medium">1</span>
                        </div>
                        <div class="flex flex-col items-center p-1.5 sm:p-2.5 bg-slate-900/60 rounded-lg border border-slate-700/40 hover:border-green-500/50 hover:bg-slate-900/80 transition-all duration-200">
                            <span class="text-[10px] sm:text-xs text-green-400 font-semibold mb-0.5">Good</span>
                            <span class="text-xs sm:text-sm text-gray-200 font-medium">2</span>
                        </div>
                        <div class="flex flex-col items-center p-1.5 sm:p-2.5 bg-slate-900/60 rounded-lg border border-slate-700/40 hover:border-cyan-500/50 hover:bg-slate-900/80 transition-all duration-200">
                            <span class="text-[10px] sm:text-xs text-cyan-400 font-semibold mb-0.5">Sturdy</span>
                            <span class="text-xs sm:text-sm text-gray-200 font-medium">3</span>
                        </div>
                        <div class="flex flex-col items-center p-1.5 sm:p-2.5 bg-slate-900/60 rounded-lg border border-slate-700/40 hover:border-lime-500/50 hover:bg-slate-900/80 transition-all duration-200">
                            <span class="text-[10px] sm:text-xs text-lime-400 font-semibold mb-0.5">Rare</span>
                            <span class="text-xs sm:text-sm text-gray-200 font-medium">4</span>
                        </div>
                        <div class="flex flex-col items-center p-1.5 sm:p-2.5 bg-slate-900/60 rounded-lg border border-slate-700/40 hover:border-blue-500/50 hover:bg-slate-900/80 transition-all duration-200">
                            <span class="text-[10px] sm:text-xs text-blue-400 font-semibold mb-0.5">Perfect</span>
                            <span class="text-xs sm:text-sm text-gray-200 font-medium">5</span>
                        </div>
                        <div class="flex flex-col items-center p-1.5 sm:p-2.5 bg-slate-900/60 rounded-lg border border-slate-700/40 hover:border-purple-500/50 hover:bg-slate-900/80 transition-all duration-200">
                            <span class="text-[10px] sm:text-xs text-purple-400 font-semibold mb-0.5">Scarce</span>
                            <span class="text-xs sm:text-sm text-gray-200 font-medium">6</span>
                        </div>
                    </div>
                    <!-- Second row: 5 items (Epic to Eternal) -->
                    <div class="grid grid-cols-3 sm:grid-cols-5 gap-1.5 sm:gap-2.5">
                        <div class="flex flex-col items-center p-1.5 sm:p-2.5 bg-slate-900/60 rounded-lg border border-slate-700/40 hover:border-orange-500/50 hover:bg-slate-900/80 transition-all duration-200">
                            <span class="text-[10px] sm:text-xs text-orange-400 font-semibold mb-0.5">Epic</span>
                            <span class="text-xs sm:text-sm text-gray-200 font-medium">8</span>
                        </div>
                        <div class="flex flex-col items-center p-1.5 sm:p-2.5 bg-slate-900/60 rounded-lg border border-slate-700/40 hover:border-violet-500/50 hover:bg-slate-900/80 transition-all duration-200">
                            <span class="text-[10px] sm:text-xs text-violet-400 font-semibold mb-0.5">Legend</span>
                            <span class="text-xs sm:text-sm text-gray-200 font-medium">10</span>
                        </div>
                        <div class="flex flex-col items-center p-1.5 sm:p-2.5 bg-slate-900/60 rounded-lg border border-slate-700/40 hover:border-pink-500/50 hover:bg-slate-900/80 transition-all duration-200">
                            <span class="text-[10px] sm:text-xs text-pink-400 font-semibold mb-0.5">Immortal</span>
                            <span class="text-xs sm:text-sm text-gray-200 font-medium">14</span>
                        </div>
                        <div class="flex flex-col items-center p-1.5 sm:p-2.5 bg-slate-900/60 rounded-lg border border-slate-700/40 hover:border-red-500/50 hover:bg-slate-900/80 transition-all duration-200">
                            <span class="text-[10px] sm:text-xs text-red-400 font-semibold mb-0.5">Myth</span>
                            <span class="text-xs sm:text-sm text-gray-200 font-medium">20</span>
                        </div>
                        <div class="flex flex-col items-center p-1.5 sm:p-2.5 bg-slate-900/60 rounded-lg border border-slate-700/40 hover:border-yellow-500/50 hover:bg-slate-900/80 transition-all duration-200">
                            <span class="text-[10px] sm:text-xs text-yellow-400 font-semibold mb-0.5">Eternal</span>
                            <span class="text-xs sm:text-sm text-gray-200 font-medium">28</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Elixir Selection -->
        <div class="card">
            <h2 class="section-title">Select Elixir Rarities</h2>
            <div id="elixir-checkbox-container" class="flex flex-wrap gap-3 justify-center"></div>
        </div>

        <!-- Two Column Layout: Inputs on left, Results on right -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6">
            <!-- Left Column: Elixir Inputs (2/3 width) -->
            <div class="lg:col-span-2">
                <div id="elixir-sections-container" class="space-y-3 md:space-y-4"></div>
            </div>

            <!-- Right Column: Results (1/3 width, sticky) -->
            <div class="lg:col-span-1">
                <div class="sticky-results space-y-3 md:space-y-4">
                    <!-- Total Points Section -->
                    <div class="card">
                        <h2 class="section-title text-base md:text-lg">Total Points</h2>
                        <div id="elixir-totals-container" class="grid grid-cols-1 gap-2 md:gap-3"></div>
                    </div>

                    <!-- Total Absorb Stats Section -->
                    <div class="card">
                        <h2 class="section-title text-base md:text-lg">Total Absorb Stats</h2>
                        <div id="elixir-absorb-totals-container" class="grid grid-cols-1 gap-2 md:gap-3"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script type="module">
        document.addEventListener('DOMContentLoaded', () => {
            // --- Elixir Calculator Logic ---
            const elixirData = {
                rarities: [
                    { id: 'common', name: 'Common', value: 1, defaultChecked: false },
                    { id: 'good', name: 'Good', value: 2, defaultChecked: false },
                    { id: 'sturdy', name: 'Sturdy', value: 3, defaultChecked: false },
                    { id: 'rare', name: 'Rare', value: 4, defaultChecked: false },
                    { id: 'perfect', name: 'Perfect', value: 5, defaultChecked: true },
                    { id: 'scarce', name: 'Scarce', value: 6, defaultChecked: false },
                    { id: 'epic', name: 'Epic', value: 8, defaultChecked: false },
                    { id: 'legendary', name: 'Legendary', value: 10, defaultChecked: false },
                    { id: 'immortal', name: 'Immortal', value: 14, defaultChecked: false },
                    { id: 'myth', name: 'Myth', value: 20, defaultChecked: false },
                    { id: 'eternal', name: 'Eternal', value: 28, defaultChecked: false }
                ],
                stats: [
                    { id: 'attack', name: 'Attack', shortName: 'ATK', isPercentage: false, decimals: 0 },
                    { id: 'critdmg', name: 'Critical Hit Damage', shortName: 'Crit DMG', isPercentage: true, decimals: 3 },
                    { id: 'talismanDmg', name: 'Talisman Damage', shortName: 'Talisman DMG', isPercentage: true, decimals: 3 },
                    { id: 'hp', name: 'HP', shortName: 'HP', isPercentage: false, decimals: 0 },
                    { id: 'skilldmg', name: 'Skill Damage', shortName: 'Skill DMG', isPercentage: true, decimals: 3 }
                ],
                colors: {
                    common: { bg: '#9ca3af', text: '#1f2937' },
                    good: { bg: '#10b981', text: '#ffffff' },
                    sturdy: { bg: '#06b6d4', text: '#ffffff' },
                    rare: { bg: '#22c55e', text: '#ffffff' },
                    perfect: { bg: '#3b82f6', text: '#ffffff' },
                    scarce: { bg: '#8b5cf6', text: '#ffffff' },
                    epic: { bg: '#f97316', text: '#ffffff' },
                    legendary: { bg: '#a855f7', text: '#ffffff' },
                    immortal: { bg: '#ec4899', text: '#ffffff' },
                    myth: { bg: '#ef4444', text: '#ffffff' },
                    eternal: { bg: '#fbbf24', text: '#1f2937' }
                }
            };
            
            const elixirAbsorbData = {
                common:    { attack: 100,  critdmg: 0.01, talismanDmg: 0.001, hp: 10000,  skilldmg: 0.002 },
                good:      { attack: 200,  critdmg: 0.02, talismanDmg: 0.002, hp: 20000,  skilldmg: 0.004 },
                sturdy:    { attack: 300,  critdmg: 0.03, talismanDmg: 0.003, hp: 30000,  skilldmg: 0.006 },
                rare:      { attack: 400,  critdmg: 0.04, talismanDmg: 0.004, hp: 40000,  skilldmg: 0.008 },
                perfect:   { attack: 1075,  critdmg: 0.05, talismanDmg: 0.005, hp: 108000,  skilldmg: 0.01 },
                scarce:    { attack: 1290,  critdmg: 0.06, talismanDmg: 0.006, hp: 129000,  skilldmg: 0.012 },
                epic:      { attack: 1720, critdmg: 0.08, talismanDmg: 0.008, hp: 172000, skilldmg: 0.016 },
                legendary: { attack: 2150, critdmg: 0.10, talismanDmg: 0.010, hp: 215000, skilldmg: 0.020 },
                immortal:  { attack: 3010, critdmg: 0.14, talismanDmg: 0.014, hp: 301000, skilldmg: 0.028 },
                myth:      { attack: 4300, critdmg: 0.20, talismanDmg: 0.020, hp: 430000, skilldmg: 0.040 },
                // still uncertain about eternal stats
                eternal:   { attack: 6020, critdmg: 0.28, talismanDmg: 0.028, hp: 602000, skilldmg: 0.056 }
            };

            const checkboxContainer = document.getElementById('elixir-checkbox-container');
            const sectionsContainer = document.getElementById('elixir-sections-container');
            const totalsContainer = document.getElementById('elixir-totals-container');
            const absorbTotalsContainer = document.getElementById('elixir-absorb-totals-container');

            function formatStatNumber(num) {
                // Check for Billions first
                if (num >= 1000000000) {
                    return (num / 1000000000).toFixed(1).replace(/\.0$/, '') + 'B';
                }
                // Then check for Millions
                if (num >= 1000000) {
                    return (num / 1000000).toFixed(1).replace(/\.0$/, '') + 'M';
                }
                // Then check for Thousands
                if (num >= 1000) {
                    return (num / 1000).toFixed(1).replace(/\.0$/, '') + 'K';
                }
                // Otherwise, return the number as is with locale formatting
                return num.toLocaleString('id-ID');
            }

            function calculateElixirTotals() {
                const pointTotals = {};
                const absorbTotals = {};
                elixirData.stats.forEach(stat => {
                    pointTotals[stat.id] = 0;
                    absorbTotals[stat.id] = 0;
                });

                elixirData.rarities.forEach(rarity => {
                    const checkbox = document.getElementById(`elixir-check-${rarity.id}`);
                    if (checkbox.checked) {
                        elixirData.stats.forEach(stat => {
                            const input = document.getElementById(`elixir-${rarity.id}-${stat.id}`);
                            const count = parseInt(input.value) || 0;
                            pointTotals[stat.id] += count * rarity.value;
                            absorbTotals[stat.id] += count * elixirAbsorbData[rarity.id][stat.id];
                        });
                    }
                });

                elixirData.stats.forEach(stat => {
                    // Update Point Totals
                    const totalEl = document.getElementById(`elixir-total-${stat.id}`);
                    totalEl.textContent = formatStatNumber(pointTotals[stat.id]);
                    
                    // Update Absorb Stat Totals (show exact numbers, no abbreviation)
                    const absorbTotalEl = document.getElementById(`elixir-absorb-total-${stat.id}`);
                    if (stat.isPercentage) {
                        absorbTotalEl.textContent = `${(absorbTotals[stat.id]).toFixed(stat.decimals)}%`;
                    } else {
                        absorbTotalEl.textContent = absorbTotals[stat.id].toLocaleString('en-US');
                    }
                });
            }

            function initElixirCalculator() {
                if (!checkboxContainer) return;
                // Generate Checkboxes
                elixirData.rarities.forEach(rarity => {
                    const div = document.createElement('div');
                    const checkboxId = `elixir-check-${rarity.id}`;
                    const colors = elixirData.colors[rarity.id] || { bg: '#374151', text: '#d1d5db' };
                    div.innerHTML = `
                        <input type="checkbox" id="${checkboxId}" class="elixir-checkbox hidden" ${rarity.defaultChecked ? 'checked' : ''}>
                        <label for="${checkboxId}" class="elixir-checkbox-label" style="background-color: ${colors.bg}; color: ${colors.text};">
                            ${rarity.name}
                        </label>
                    `;
                    checkboxContainer.appendChild(div);
                });

                // Generate Rarity Sections
                elixirData.rarities.forEach(rarity => {
                    const section = document.createElement('div');
                    section.id = `elixir-section-${rarity.id}`;
                    section.className = `card ${!rarity.defaultChecked ? 'hidden' : ''}`;
                    
                    let inputsHTML = '';
                    elixirData.stats.forEach(stat => {
                        inputsHTML += `
                            <div class="input-group">
                                <label for="elixir-${rarity.id}-${stat.id}" title="${stat.name}">${stat.shortName}</label>
                                <input type="number" id="elixir-${rarity.id}-${stat.id}" class="input-field" value="0" min="0">
                            </div>
                        `;
                    });

                    const colors = elixirData.colors[rarity.id] || { bg: '#374151', text: '#d1d5db' };
                    section.innerHTML = `
                        <h3 class="section-title" style="color: ${colors.bg};">${rarity.name}</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3 md:gap-4">
                            ${inputsHTML}
                        </div>
                    `;
                    sectionsContainer.appendChild(section);
                });

                // Generate Totals Sections (Points and Absorb) - Compact sidebar version
                elixirData.stats.forEach(stat => {
                    // Points - Compact version
                    const pointDiv = document.createElement('div');
                    pointDiv.className = "p-3 bg-slate-800/50 rounded-lg border border-slate-700";
                    pointDiv.innerHTML = `
                        <div class="flex justify-between items-center">
                            <div class="text-xs text-gray-400 uppercase tracking-wide">${stat.name}</div>
                            <div id="elixir-total-${stat.id}" class="text-xl font-bold text-blue-400">0</div>
                        </div>
                    `;
                    totalsContainer.appendChild(pointDiv);
                    
                    // Absorb - Compact version
                    const absorbDiv = document.createElement('div');
                    absorbDiv.className = "p-3 bg-slate-800/50 rounded-lg border border-slate-700";
                    absorbDiv.innerHTML = `
                        <div class="flex justify-between items-center">
                            <div class="text-xs text-gray-400 uppercase tracking-wide">${stat.name}</div>
                            <div id="elixir-absorb-total-${stat.id}" class="text-xl font-bold text-green-400">0</div>
                        </div>
                    `;
                    absorbTotalsContainer.appendChild(absorbDiv);
                });

                // Add Event Listeners
                elixirData.rarities.forEach(rarity => {
                    const checkbox = document.getElementById(`elixir-check-${rarity.id}`);
                    const section = document.getElementById(`elixir-section-${rarity.id}`);
                    checkbox.addEventListener('change', () => {
                        section.classList.toggle('hidden', !checkbox.checked);
                        calculateElixirTotals();
                    });

                    elixirData.stats.forEach(stat => {
                        const input = document.getElementById(`elixir-${rarity.id}-${stat.id}`);
                        input.addEventListener('input', calculateElixirTotals);
                    });
                });

                calculateElixirTotals();
            }

            // Initialize calculator
            initElixirCalculator();
        });
    </script>

</body>
</html>
